# Настройка GitHub Pages для документации API

После настройки GitHub Actions workflow, вам нужно активировать GitHub Pages в настройках репозитория:

1. Перейдите в настройки вашего репозитория на GitHub (Settings)
2. В левом боковом меню выберите "Pages"
3. В разделе "Build and deployment":
   - Source: Выберите "GitHub Actions"
   - GitHub Pages будет автоматически использовать workflow, который мы настроили

После активации GitHub Pages, документация будет доступна по адресу: 
`https://[ваш-аккаунт].github.io/pyaterochka_api/`

## Куда публикуется документация?

В отличие от старого способа, когда GitHub Pages размещался в ветке `gh-pages` или в директории `/docs` ветки `main`, наш workflow использует современный подход с GitHub Actions:

1. Сгенерированная документация загружается как "artifact" с помощью `actions/upload-pages-artifact`
2. Затем artifact публикуется через `actions/deploy-pages`
3. Публикация происходит в специальное место для GitHub Pages, а не в какую-то ветку репозитория

Это позволяет:
- Не загромождать репозиторий лишними коммитами со сгенерированной документацией
- Отделить исходный код от сгенерированных файлов
- Автоматизировать весь процесс через GitHub Actions

## Как работает автоматическая генерация документации

1. При каждом изменении в ветке `main` запускается GitHub Actions workflow
2. Workflow выполняет следующие шаги:
   - Устанавливает Python и зависимости проекта
   - Очищает директорию `docs/` от старых файлов (кроме `.gitkeep`)
   - Запускает тесты, которые создают JSON-схемы в директории `tests/__snapshots__/`
   - Генерирует HTML-документацию из этих схем с помощью `json-schema-for-humans`
   - Создает индексную страницу со ссылками на все схемы
   - Публикует результаты на GitHub Pages

## Локальная генерация документации

Для локальной генерации документации выполните следующие команды:

```bash
# Установка зависимостей
pip install json-schema-for-humans

# Очистка директории docs от старых файлов
mkdir -p docs
find docs -type f -not -name ".gitkeep" -delete

# Запуск тестов для создания схем
pytest tests/ -v

# Генерация документации
python -m json_schema_for_humans.generate tests/__snapshots__/ docs --config-file json_schema_for_humans_config.json

# Создание индексной страницы
python create_index_schema.py

# Добавляем файл .nojekyll для локального просмотра через браузер
touch docs/.nojekyll
```

После этого документация будет доступна в директории `docs/`. Вы можете открыть файл `docs/index.html` в любом браузере для просмотра.
